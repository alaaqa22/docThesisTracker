<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="jakarta.faces.facelets"
>
<f:view>

    <h:head>
        <title>circList</title>
        <link href="${request.contextPath}/resources/css/style.css" rel="stylesheet" type="text/css"/>

        <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet"/>

    </h:head>

    <h:body>
        <ui:include src="/views/anonymous/header.xhtml"/>

        <div class="container">
            <h:form>


                <!---  dataTable for a Circulation List -->
                <h:dataTable id="cir-dt" value="#{circulationListBacking.circulations}" var="circulation" styleClass="my-table"
                             border="2">

                    <f:facet name="header">
                        <h:outputText value="Circulations" styleClass="text-center"/>

                    </f:facet>

                    <!-- Fakultät -->
                    <h:column rendered="#{circulationListBacking.sessionInfo.admin}">
                        <f:facet name="header">
                            <h:outputText value="Fakultät"/>
                            <h:inputText value="#{circulationListBacking.filter.facultyId}">
                                <f:ajax event="keyup" listener="#{circulationListBacking.loadCirculations}"
                                        render="cir-dt"/>
                            </h:inputText>
                        </f:facet>
                        <h:outputText value="#{circulation.facultyId}"/>

                    </h:column>

                    <!--> Titel <!-->
                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Titel"/>
                            <h:inputText value="#{circulationListBacking.filter.title}">
                                <f:ajax event="change" listener="#{circulationListBacking.loadCirculations}" render="cir-dt"/>

                            </h:inputText>
                        </f:facet>
                        <h:outputLink value="circulationDetails.xhtml?id=#{circulation.id}">
                            <h:outputText value="#{circulation.title}"/>
                        </h:outputLink>


                    </h:column>


                    <!---  Name des Doktoranden -->
                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Doktoranden"/>
                            <h:inputText value="#{circulationListBacking.filter.doctoralCandidateName}">
                                <f:ajax event="change" listener="#{circulationListBacking.loadCirculations}" render="cir-dt"/>
                            </h:inputText>
                        </f:facet>
                        <h:outputText value="#{circulation.doctoralCandidateName}"/>

                    </h:column>

                    <!---  Doktorvater -->
                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Doktorvater"/>
                            <h:inputText value="#{circulationListBacking.filter.doctoralSupervisor}">
                                <f:ajax event="change" listener="#{circulationListBacking.loadCirculations}" render="cir-dt"/>
                            </h:inputText>
                        </f:facet>
                        <h:outputText value="#{circulation.doctoralSupervisor}"/>

                    </h:column>

                    <!---  Startzeit-->
                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Startzeit"/>
                        </f:facet>
                        <h:outputText value="#{circulation.startDate}"/>

                    </h:column>


                    <!---  Endzeit -->
                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Endzeit"/>
                        </f:facet>
                        <h:outputText value="#{circulation.endDate}"/>
                    </h:column>


                </h:dataTable>

                <!-- Pagination Controls -->
                <div class="d-flex justify-content-center">


                    <ul class="pagination">
                        <h:panelGroup >
                            <h:panelGroup layout="block" styleClass="page-item" rendered="#{!circulationListBacking.circPagination.isFirstPage()}">
                                <h:commandLink id="firstpage-link" value="First" action="#{circulationListBacking.circPagination.firstPage()}"
                                               styleClass="page-link">
                                    <f:ajax execute="@this" render="@form" />
                                </h:commandLink>
                            </h:panelGroup>

                            <h:panelGroup layout="block" styleClass="page-item"
                                          rendered="#{!circulationListBacking.circPagination.isFirstPage()}">
                                <h:commandLink id="previouspage-link" value="Previous"
                                               action="#{circulationListBacking.circPagination.previousPage()}"
                                               styleClass="page-link">
                                    <f:ajax execute="@this" render="@form" />
                                </h:commandLink>
                            </h:panelGroup>

                            <h:outputText styleClass="page-item"
                                          value="Page : #{circulationListBacking.circPagination.currentPage} of #{circulationListBacking.circPagination.totalNumOfPages}"/>

                            <h:panelGroup layout="block" styleClass="page-item"
                                          rendered="#{!circulationListBacking.circPagination.isLastPage()}">
                                <h:commandLink id="nextpage-link" value="Next" action="#{circulationListBacking.circPagination.nextPage()}"
                                               styleClass="page-link">
                                    <f:ajax execute="@this" render="@form" />
                                </h:commandLink>
                            </h:panelGroup>

                            <h:panelGroup layout="block" styleClass="page-item"
                                          rendered="#{!circulationListBacking.circPagination.isLastPage()}">
                                <h:commandLink id="lastpage-link" value="Last" action="#{circulationListBacking.circPagination.lastPage()}"
                                               styleClass="page-link">
                                    <f:ajax execute="@this" render="@form" />
                                </h:commandLink>
                            </h:panelGroup>
                        </h:panelGroup>
                    </ul>


                </div>
            </h:form>
        </div>
    </h:body>
</f:view>

</html>
